-- MySQL dump 10.13  Distrib 5.6.30, for linux-glibc2.5 (x86_64)
--
-- Host: localhost    Database: blog
-- ------------------------------------------------------
-- Server version	5.6.30-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `article`
--

DROP TABLE IF EXISTS `article`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `article` (
  `id` varchar(40) NOT NULL,
  `title` varchar(50) DEFAULT NULL,
  `brief` varchar(300) DEFAULT NULL,
  `content` text,
  `date` varchar(30) DEFAULT NULL,
  `category_id` int(11) DEFAULT NULL,
  `page_views` int(11) DEFAULT NULL,
  `image` varchar(60) DEFAULT NULL,
  `user_id` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `category_id` (`category_id`),
  KEY `user_id` (`user_id`),
  KEY `ix_article_title` (`title`),
  KEY `ix_article_brief` (`brief`(255)),
  CONSTRAINT `article_ibfk_1` FOREIGN KEY (`category_id`) REFERENCES `category` (`id`),
  CONSTRAINT `article_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `article`
--

LOCK TABLES `article` WRITE;
/*!40000 ALTER TABLE `article` DISABLE KEYS */;
INSERT INTO `article` VALUES ('58304b03-cae2-4210-81d1-3879665299e7','完全理解 Python 迭代对象、迭代器、生成器','在了解Python的数据结构时，容器(container)、可迭代对象(iterable)、迭代器(iterator)、生成器(generator)、列表/集合/字典推导式(list,set,dict comprehension)众多概念参杂在一起，难免让初学者一头雾水，我将用一篇文章试图将这些概念以及它们之间的关系捋清楚。​','<p>\r\n	<span style=\"font-size:14px;\"><span style=\"color:#3E3E3E;font-family:&quot;font-size:14px;background-color:#FFFFFF;\">在了解Python的数据结构时，容器(container)、可迭代对象(iterable)、迭代器(iterator)、生成器(generator)、列表/集合/字典推导式(list,set,dict comprehension)众多概念参杂在一起，难免让初学者一头雾水，我将用一篇文章试图将这些概念以及它们之间的关系捋清楚。</span></span> \r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\"><span style=\"font-size:14px;\"></span><img src=\"/static/upload/640.png\" alt=\"\" /></span> \r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\"> </span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"color:#C00000;font-weight:bold;\">容器(container)</span> \r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	容器是一种把多个元素组织在一起的数据结构，容器中的元素可以逐个地迭代获取，可以用in, not in关键字判断元素是否包含在容器中。通常这类数据结构把所有的元素存储在内存中（也有一些特例，并不是所有的元素都放在内存，比如迭代器和生成器对象）在Python中，常见的容器对象有：\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			list, deque, ….\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			set, frozensets, ….\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			dict, defaultdict, OrderedDict, Counter, ….\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			tuple, namedtuple, …\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			str\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	容器比较容易理解，因为你就可以把它看作是一个盒子、一栋房子、一个柜子，里面可以塞任何东西。从技术角度来说，当它可以用来询问某个元素是否包含在其中时，那么这个对象就可以认为是一个容器，比如 list，set，tuples都是容器对象：\r\n</p>\r\n<blockquote style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">[</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">]</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#999999 !important;font-style:italic !important;\"># lists</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">4</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">not</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">[</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">]</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">{</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">}</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#999999 !important;font-style:italic !important;\"># sets</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">4</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">not</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">{</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">}</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#999999 !important;font-style:italic !important;\"># tuples</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">4</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">not</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span> \r\n	</p>\r\n</blockquote>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	询问某元素是否在dict中用dict的中key：\r\n</p>\r\n<blockquote style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">d</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;=&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">{</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">:&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'foo\'</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">:&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'bar\'</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">:&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'qux\'</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">}</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">d</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'foo\'</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">not</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">d</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#999999 !important;font-style:italic !important;\"># \'foo\' 不是dict中的元素</span></span> \r\n	</p>\r\n</blockquote>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	询问某substring是否在string中：\r\n</p>\r\n<blockquote style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">s</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;=&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'foobar\'</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'b\'</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">s</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'x\'</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">not</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">s</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">assert</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'foo\'</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">s</span></span> \r\n	</p>\r\n</blockquote>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	尽管绝大多数容器都提供了某种方式来获取其中的每一个元素，但这并不是容器本身提供的能力，而是可迭代对象赋予了容器这种能力，当然并不是所有的容器都是可迭代的，比如：Bloom filter，虽然Bloom filter可以用来检测某个元素是否包含在容器中，但是并不能从容器中获取其中的每一个值，因为Bloom filter压根就没把元素存储在容器中，而是通过一个散列函数映射成一个值保存在数组中。\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"color:#C00000;font-weight:bold;\">可迭代对象(iterable)</span> \r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	刚才说过，很多容器都是可迭代对象，此外还有更多的对象同样也是可迭代对象，比如处于打开状态的files，sockets等等。但凡是可以返回一个迭代器的对象都可称之为可迭代对象，听起来可能有点困惑，没关系，先看一个例子：\r\n</p>\r\n<blockquote style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">x</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;=&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">[</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">]</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">y</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;=&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">iter</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">x</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">z</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;=&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">iter</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">x</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">next</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">y</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">next</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">y</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">next</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">z</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">type</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">x</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&lt;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;color:#800080 !important;\">class</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'list\'</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">type</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">y</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&lt;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;color:#800080 !important;\">class</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'list_iterator\'</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;</span></span> \r\n	</p>\r\n</blockquote>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	这里x是一个可迭代对象，可迭代对象和容器一样是一种通俗的叫法，并不是指某种具体的数据类型，list是可迭代对象，dict是可迭代对象，set也是可迭代对象。y和z是两个独立的迭代器，迭代器内部持有一个状态，该状态用于记录当前迭代所在的位置，以方便下次迭代的时候获取正确的元素。迭代器有一种具体的迭代器类型，比如list_iterator，set_iterator。可迭代对象实现了__iter__方法，该方法返回一个迭代器对象。\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	当运行代码：\r\n</p>\r\n<blockquote style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">x</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;=&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">[</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">]</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">for</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">elem&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:bold !important;\">in</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">x</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">:</span></span> \r\n	</p>\r\n	<p>\r\n		<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">...</span></span> \r\n	</p>\r\n</blockquote>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	实际执行情况是：\r\n</p>\r\n<p>\r\n	<img src=\"/static/upload/641.png\" alt=\"\" />\r\n</p>\r\n<p>\r\n	<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n		反编译该段代码，你可以看到解释器显示地调用GET_ITER指令，相当于调用iter(x)，FOR_ITER指令就是调用next()方法，不断地获取迭代器中的下一个元素，但是你没法直接从指令中看出来，因为他被解释器优化过了。\r\n	</p>\r\n	<blockquote style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:bold !important;\">import</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">dis</span></span>\r\n		</p>\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">x</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;=&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">[</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">2</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">,</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">]</span></span>\r\n		</p>\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&gt;&gt;&gt;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">dis</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">.</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:teal !important;\">dis</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#DD1144 !important;\">\'for _ in x: pass\'</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span>\r\n		</p>\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">0</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">SETUP</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">_</span>LOOP<span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">14</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;\">to</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">17</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span>\r\n		</p>\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">3</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">LOAD</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">_</span>NAME<span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">0</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">x</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span>\r\n		</p>\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">6</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">GET_ITER</span></span>\r\n		</p>\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">7</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">FOR</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">_</span>ITER<span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">6</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;\">to</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">16</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span>\r\n		</p>\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">10</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">STORE</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">_</span>NAME<span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">1</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">(</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">_</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">)</span></span>\r\n		</p>\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">13</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#002D7A !important;\">JUMP</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#333333 !important;\">_</span>ABSOLUTE<span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#009999 !important;\">7</span></span>\r\n		</p>\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:inherit !important;color:#006FE0 !important;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;&nbsp;&nbsp;</span><span class=\"\" style=\"font-family:inherit;font-size:inherit !important;line-height:inherit !important;font-weight:','2017-07-24 13:33:34',2,4,'images/python2.png','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5'),('5a688faa-d793-441e-8a05-6d18a2d95233','MySQL索引查询一些技巧','MySQL索引查询一些技巧 希望以后多多实践 优化数据库查询','<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:18px;\"><strong><span style=\"font-family:宋体;\">一、一些常见的</span><span style=\"font-family:Calibri;\">SQL</span><span style=\"font-family:宋体;\">实践</span></strong></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">1</span><span style=\"font-family:宋体;\">）负向条件查询不能使用索引</span></span></strong>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from order where status<span style=\"color:#FF4C00;\">!=</span>0 and stauts<span style=\"color:#FF4C00;\">!=</span>1</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:Calibri;\">not in/not exists</span><span style=\"font-family:宋体;\">都不是好习惯</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\"><br />\r\n</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">可以优化为</span><span style=\"font-family:Calibri;\">in</span><span style=\"font-family:宋体;\">查询：</span></span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from order where status&nbsp;<span style=\"color:#FF4C00;\">in</span>(2,3)</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">2</span><span style=\"font-family:宋体;\">）前导模糊查询不能使用索引</span></span></strong>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from order where desc like&nbsp;<span style=\"color:#FF4C00;\">\'%XX\'</span></span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\">而非前导模糊查询则可以：</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from order where desc like&nbsp;<span style=\"color:#FF4C00;\">\'XX%\'</span></span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">3</span><span style=\"font-family:宋体;\">）数据区分度不大的字段不宜使用索引</span></span></strong>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from user where&nbsp;<span style=\"color:#FF4C00;\">sex</span>=1</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\">原因：性别只有男，女，每次过滤掉的数据很少，不宜使用索引。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\"><br />\r\n</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">经验上，能过滤</span><span style=\"font-family:Calibri;\">80%</span><span style=\"font-family:宋体;\">数据时就可以使用索引。对于订单状态，如果状态值很少，不宜使用索引，如果状态值很多，能够过滤大量数据，则应该建立索引。</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">4</span><span style=\"font-family:宋体;\">）在属性上进行计算不能命中索引</span></span></strong>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:12px;\"><span style=\"font-family:Calibri;\">select * from order where&nbsp;<span style=\"color:#FF4C00;\">YEAR(date)&nbsp;</span>&lt; =&nbsp;</span><span style=\"font-family:Calibri;\">\'2017\'</span></span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">即使</span><span style=\"font-family:Calibri;\">date</span><span style=\"font-family:宋体;\">上建立了索引，也会全表扫描，</span></span><span style=\"font-family:宋体;font-size:14px;\">可优化为值计算：</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from order where date &lt; = CURDATE()</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\">或者：</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from order where date &lt; = \'2017-01-01\'</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:18px;\"><strong><span style=\"font-family:宋体;\">二、并非周知的</span><span style=\"font-family:Calibri;\">SQL</span><span style=\"font-family:宋体;\">实践</span></strong></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">5</span><span style=\"font-family:宋体;\">）如果业务大部分是单条查询，使用</span><span style=\"font-family:Calibri;\">Hash</span><span style=\"font-family:宋体;\">索引性能更好，例如用户中心</span></span></strong>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from user where uid=?</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from user where login_name=?</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\">原因：</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:Calibri;\">B-Tree</span><span style=\"font-family:宋体;\">索引的时间复杂度是</span><span style=\"font-family:Calibri;\">O(log(n))</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:Calibri;\">Hash</span><span style=\"font-family:宋体;\">索引的时间复杂度是</span><span style=\"font-family:Calibri;\">O(1)</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">6</span><span style=\"font-family:宋体;\">）允许为</span><span style=\"font-family:Calibri;\">null</span><span style=\"font-family:宋体;\">的列，查询有潜在大坑</span></span></strong>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">单列索引不存</span><span style=\"font-family:Calibri;\">null</span><span style=\"font-family:宋体;\">值，复合索引不存全为</span><span style=\"font-family:Calibri;\">null</span><span style=\"font-family:宋体;\">的值，如果列允许为</span><span style=\"font-family:Calibri;\">null</span><span style=\"font-family:宋体;\">，可能会得到“不符合预期”的结果集</span></span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from user where name&nbsp;<span style=\"color:#FF4C00;\">!=</span>&nbsp;\'shenjian\'</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">如果</span><span style=\"font-family:Calibri;\">name</span><span style=\"font-family:宋体;\">允许为</span><span style=\"font-family:Calibri;\">null</span><span style=\"font-family:宋体;\">，索引不存储</span><span style=\"font-family:Calibri;\">null</span><span style=\"font-family:宋体;\">值，结果集中不会包含这些记录。</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\"><br />\r\n</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">所以，请使用not null约束以及默认值。</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">7</span><span style=\"font-family:宋体;\">）复合索引最左前缀，并不是值</span><span style=\"font-family:Calibri;\">SQL</span><span style=\"font-family:宋体;\">语句的</span><span style=\"font-family:Calibri;\">where</span><span style=\"font-family:宋体;\">顺序要和复合索引一致</span></span></strong>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">用户中心建立了</span><span style=\"font-family:Calibri;\">(login_name, passwd)</span><span style=\"font-family:宋体;\">的复合索引</span></span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from user where&nbsp;<span style=\"color:#FF4C00;\">login_name=? and passwd=?</span></span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from user where&nbsp;<span style=\"color:#FF4C00;\">passwd=? and login_name=?</span></span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-family:宋体;font-size:14px;\">都能够命中索引</span></strong>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from user where login_name=?</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-family:宋体;font-size:14px;\">也能命中索引</span></strong><span style=\"font-family:宋体;font-size:14px;\">，满足<span>复合索引</span>最左前缀</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from user where passwd=?</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-family:宋体;font-size:14px;\">不能命中索引</span></strong><span style=\"font-family:宋体;font-size:14px;\">，不满足<span>复合索引</span>最左前缀</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">8</span><span style=\"font-family:宋体;\">）使用</span><span style=\"font-family:Calibri;\">ENUM</span><span style=\"font-family:宋体;\">而不是字符串</span></span></strong>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:Calibri;\">ENUM保存</span><span style=\"font-family:宋体;\">的是</span><span style=\"font-family:Calibri;\">TINYINT</span><span style=\"font-family:宋体;\">，别在枚举中搞一些“中国”“北京”“技术部”这样的字符串，字符串空间又大，效率又低。</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:18px;\"><strong><span style=\"font-family:宋体;\">三、小众但有用的</span><span style=\"font-family:Calibri;\">SQL</span><span style=\"font-family:宋体;\">实践</span></strong></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">9</span><span style=\"font-family:宋体;\">）如果明确知道只有一条结果返回，</span><span style=\"font-family:Calibri;\">limit 1</span><span style=\"font-family:宋体;\">能够提高效率</span></span></strong>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from user where login_name=?</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\">可以优化为：</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from user where login_name=? limit 1</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\">原因：</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\">你知道只有一条结果，但数据库并不知道，明确告诉它，让它主动停止游标移动</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">10</span><span style=\"font-family:宋体;\">）把计算放到业务层而不是数据库层，除了节省数据的</span><span style=\"font-family:Calibri;\">CPU</span><span style=\"font-family:宋体;\">，还有意想不到的查询缓存优化效果</span></span></strong>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-family:Calibri;font-size:12px;\">select * from order where date &lt; = CURDATE()</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">这不是一个好的</span><span style=\"font-family:Calibri;\">SQL</span><span style=\"font-family:宋体;\">实践，应该优化为：</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:12px;\">$curDate = date(\'Y-m-d\');</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:12px;\">$res = mysql_query(</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:12px;\">&nbsp;&nbsp;&nbsp; \'select * from order where date &lt; = $curDate\');</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\">原因：</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:宋体;font-size:14px;\"></span><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">释放了数据库的</span><span style=\"font-family:Calibri;\">CPU</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">多次调用，传入的</span><span style=\"font-family:Calibri;\">SQL</span><span style=\"font-family:宋体;\">相同，才可以利用查询缓存</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">（</span><span style=\"font-family:Calibri;\">11</span><span style=\"font-family:宋体;\">）强制类型转换会全表扫描</span></span></strong>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"color:#FF4C00;font-family:Calibri;font-size:12px;\">select * from user where phone=13800001234</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">你以为会命中</span><span style=\"font-family:Calibri;\">phone</span><span style=\"font-family:宋体;\">索引么？大错特错</span></span></strong><span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">了，这个语句究竟要怎么改？</span></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-family:Calibri;font-size:14px;\">&nbsp;</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"><span style=\"font-family:宋体;\">末了，再加一条，不要使用</span><span style=\"font-family:Calibri;\">select *（潜台词，文章的SQL都不合格 =_=）</span><span style=\"font-family:宋体;\">，只返回需要的列，能够大大的节省数据传输量，与数据库的内存使用量哟。</span></span>\r\n</p>','2017-07-24 15:19:59',3,0,'images/mysql.png','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5'),('7b6af791-1126-4b28-8bab-0f6ac4ec30f2','Tornado 404自定义页面','自己用Tornado框架开发写了一个博客，想自定义一下404页面，网上找了一些资料，大致有以下几种思路，仅供参考','<p>\r\n	<span style=\"font-size:14px;\">刚开始找网上找资料 大致说的都是重写RequestHandler的write_error方法，但不生效于是注释掉了，代码如下：</span> \r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\"> </span> \r\n</p>\r\n<pre class=\"prettyprint lang-py\">class BaseHandler(tornado.web.RequestHandler,SessionMixin):\r\n    \"\"\"\r\n    *RequestHandler SessionMixin基类*\r\n    \"\"\"\r\n    def get_current_user(self):\r\n        user=self.session.get(\"username\",None)\r\n        user_obj=DBHandler(User,User.name).query(user)[0] if user else None\r\n        return user_obj if user_obj else None\r\n\r\n   # def write_error(self, status_code, **kwargs):\r\n   #     if status_code == 404:\r\n   #         self.render(\'404.html\')\r\n   #     elif status_code == 500:\r\n   #         self.render(\'500.html\')\r\n   #     else:\r\n   #         super(BaseHandler, self).write_error(status_code, **kwargs)\r\n\r\n    def on_finish(self):\r\n        DBsession.close()</pre>\r\n<p>\r\n	<span style=\"font-size:14px;\">于是查看了RequestHandler的write_error源代码，发现可以直接修改源代码，如下：</span>\r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\">def write_error(self, status_code, **kwargs):<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; \"\"\"Override to implement custom error pages.<br />\r\n<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; ``write_error`` may call `write`, `render`, `set_header`, etc<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; to produce output as usual.<br />\r\n<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; If this error was caused by an uncaught exception (including<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; HTTPError), an ``exc_info`` triple will be available as<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; ``kwargs[\"exc_info\"]``. &nbsp;Note that this exception may not be<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; the \"current\" exception for purposes of methods like<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; ``sys.exc_info()`` or ``traceback.format_exc``.<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; \"\"\"<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; if self.settings.get(\"serve_traceback\") and \"exc_info\" in kwargs:<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # in debug mode, try to send a traceback<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.set_header(\'Content-Type\', \'text/plain\')<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for line in traceback.format_exception(*kwargs[\"exc_info\"]):<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.write(line)<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.finish()<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; else:<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try:<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.render(\"%s.html\"%(status_code))<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; except IOError:<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.finish(\"&lt;html&gt;&lt;title&gt;%(code)d: %(message)s&lt;/title&gt;\"<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"&lt;body&gt;%(code)d: %(message)s&lt;/body&gt;&lt;/html&gt;\" % {<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"code\": status_code,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"message\": self._reason,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; })<br />\r\n<br />\r\ntry: self.render(\"%s.html\"%(status_code)) except IOError::这三行我是手动修改添加，这样有点投机了，不知后期有没有什么影响<br />\r\n<br />\r\n第二种是在urls.py里最后添加一个(r\'/*\', NotFoundHandler),这种方法没试过<br />\r\nclass NotFoundHandler(BaseHandler):<br />\r\n&nbsp; &nbsp; def get(self):<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; self.write_error(404)<br />\r\n&nbsp; &nbsp; def write_error(self, status_code, **kwargs):<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; if status_code == 404:<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.render(\'public/404.html\')<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; elif status_code == 500:<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.render(\'public/500.html\')<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; else:<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.write(\'error:\' + str(status_code))<br />\r\n<span style=\"font-size:14px;\"></span></span>\r\n</p>','2017-07-24 13:33:34',2,11,'images/python2.png','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5'),('897c1211-2993-4a1b-99d8-38c9e898e617','监控暂无文章','监控暂无文章','监控暂无文章','2017-07-24 15:39:23',4,2,'images/zabbix.png','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5'),('af00a55c-4aeb-4f38-ae0e-aa9bcc6d350b','Nginx安全配置指南','Nginx是一个轻量级的，高性能的Web服务器以及反向代理和邮箱(IMAP/POP3)代理服务器。它运行在UNIX,GNU/Linux,BSD各种版本，Mac OS X,Solaris和Windows。Nginx是少数能处理C10K问题的服务器之一。跟传统的服务器不同，Nginx不依赖线程来处理请求。相反，它使用了更多的可扩展的事件驱动（异步）架构。Nginx为一些高流量的网站提供动力，比如WordPress,人人网，腾讯，网易等。这篇文章主要是介绍如何提高运行在Linux或UNIX系统的Nginx Web服务器的安全性。','<p style=\"font-family:&quot;font-size:16px;color:#444444;background-color:#FFFFFF;\">\r\n	Nginx是一个轻量级的，高性能的Web服务器以及反向代理和邮箱(IMAP/POP3)代理服务器。它运行在UNIX,GNU/Linux,BSD各种版本，Mac OS X,Solaris和Windows。Nginx是少数能处理C10K问题的服务器之一。跟传统的服务器不同，Nginx不依赖线程来处理请求。相反，它使用了更多的可扩展的事件驱动（异步）架构。Nginx为一些高流量的网站提供动力，比如WordPress,人人网，腾讯，网易等。这篇文章主要是介绍如何提高运行在Linux或UNIX系统的Nginx Web服务器的安全性。<br />\r\n<span></span><br />\r\n<strong>默认配置文件和Nginx端口</strong>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"font-family:&quot;font-size:16px;color:#444444;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			/usr/local/nginx/conf/ – Nginx配置文件目录，/usr/local/nginx/conf/nginx.conf是主配置文件\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			/usr/local/nginx/html/ – 默认网站文件位置\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			/usr/local/nginx/logs/ – 默认日志文件位置\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			Nginx HTTP默认端口 : TCP 80\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			Nginx&nbsp;HTTPS默认端口: TCP 443\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"font-family:&quot;font-size:16px;color:#444444;background-color:#FFFFFF;\">\r\n	你可以使用以下命令来测试Nginx配置文件准确性。\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			/usr/local/nginx/sbin/nginx -t\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		将会输出。<br />\r\nthe configuration file /usr/local/nginx/conf/nginx.conf syntax is ok<br />\r\nconfiguration file /usr/local/nginx/conf/nginx.conf test is successful<br />\r\n执行以下命令来重新加载配置文件。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			/usr/local/nginx/sbin/nginx -s reload\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		执行以下命令来停止服务器。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			/usr/local/nginx/sbin/nginx -s stop\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		一、配置SELinux\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		安全增强型Linux（SELinux）的是一个Linux内核的功能，它提供支持访问控制的安全政策保护机制。它可以大部分的攻击。下面我们来看如何启动基于CentOS/RHEL系统的SELinux。<br />\r\n<strong>安装SELinux</strong>\r\n	</p>\r\n	<li>\r\n		<p>\r\n			rpm -qa | grep selinux\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		libselinux-1.23.10-2<br />\r\nselinux-policy-targeted-1.23.16-6<br />\r\n如果没有返回任何结果，代表没有安装 SELinux，如果返回了类似上面的结果，则说明系统安装了 SELinux。<br />\r\n<strong>布什值锁定</strong><br />\r\n运行命令getsebool -a来锁定系统。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			getsebool -a | less\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			getsebool -a | grep off\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			getsebool -a | grep o\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		二、通过分区挂载允许最少特权\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		服务器上的网页/html/php文件单独分区。例如，新建一个分区/dev/sda5(第一逻辑分区)，并且挂载在/nginx。确保/nginx是以noexec, nodev and nosetuid的权限挂载。以下是我的/etc/fstab的挂载/nginx的信息：<br />\r\nLABEL=/nginx /nginx ext3 defaults,nosuid,noexec,nodev 1 2<br />\r\n注意：你需要使用fdisk和mkfs.ext3命令创建一个新分区。\r\n	</p>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		三、配置/etc/sysctl.conf强化Linux安全\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		你可以通过编辑/etc/sysctl.conf来控制和配置Linux内核、网络设置。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			# Avoid a smurf attack\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.icmp_echo_ignore_broadcasts = 1\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Turn on protection for bad icmp error messages\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.icmp_ignore_bogus_error_responses = 1\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Turn on syncookies for SYN flood attack protection\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.tcp_syncookies = 1\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Turn on and log spoofed, source routed, and redirect packets\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.all.log_martians = 1\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.default.log_martians = 1\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# No source routed packets here\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.all.accept_source_route = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.default.accept_source_route = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Turn on reverse path filtering\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.all.rp_filter = 1\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.default.rp_filter = 1\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Make sure no one can alter the routing tables\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.all.accept_redirects = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.default.accept_redirects = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.all.secure_redirects = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.default.secure_redirects = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Don\'t act as a router\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.ip_forward = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.all.send_redirects = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.conf.default.send_redirects = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Turn on execshild\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			kernel.exec-shield = 1\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			kernel.randomize_va_space = 1\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Tuen IPv6\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv6.conf.default.router_solicitations = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv6.conf.default.accept_ra_rtr_pref = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv6.conf.default.accept_ra_pinfo = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv6.conf.default.accept_ra_defrtr = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv6.conf.default.autoconf = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv6.conf.default.dad_transmits = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv6.conf.default.max_addresses = 1\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Optimization for port usefor LBs\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Increase system file descriptor limit\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			fs.file-max = 65535\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Allow for more PIDs (to reduce rollover problems); may break some programs 32768\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			kernel.pid_max = 65536\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Increase system IP port limits\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.ip_local_port_range = 2000 65000\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Increase TCP max buffer size setable using setsockopt()\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.tcp_rmem = 4096 87380 8388608\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.tcp_wmem = 4096 87380 8388608\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Increase Linux auto tuning TCP buffer limits\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# min, default, and max number of bytes to use\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# set max to at least 4MB, or higher if you use very high BDP paths\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Tcp Windows etc\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.core.rmem_max = 8388608\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.core.wmem_max = 8388608\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.core.netdev_max_backlog = 5000\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			net.ipv4.tcp_window_scaling = 1\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		四、删除所有不需要的Nginx模块\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		你需要直接通过编译Nginx源代码使模块数量最少化。通过限制只允许web服务器访问模块把风险降到最低。你可以只配置安装nginx你所需要的模块。例如，禁用SSL和autoindex模块你可以执行以下命令：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			./configure --without-http_autoindex_module --without-http_ssi_module\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;make\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;make install\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		通过以下命令来查看当编译nginx服务器时哪个模块能开户或关闭：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			./configure --help | less\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		禁用你用不到的nginx模块。<br />\r\n（可选项）更改nginx版本名称。<br />\r\n编辑文件/http/ngx_http_header_filter_module.c：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			vi +48 src/http/ngx_http_header_filter_module.c\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		找到行：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			static char ngx_http_server_string[] = \"Server: nginx\" CRLF;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			static char ngx_http_server_full_string[] = \"Server: \" NGINX_VER CRLF;\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		按照以下行修改：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			static char ngx_http_server_string[] = \"Server: Ninja Web Server\" CRLF;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			static char ngx_http_server_full_string[] = \"Server: Ninja Web Server\" CRLF;\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		保存并关闭文件。现在你可以编辑服务器了。增加以下代码到nginx.conf文件来关闭nginx版本号的显示。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			server_tokens off\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		五、使用mod_security(只适合后端Apache服务器)\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		mod_security为Apache提供一个应用程序级的防火墙。为后端Apache Web服务器安装mod_security，这会阻止很多注入式攻击。\r\n	</p>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		六、安装SELinux策略以强化Nginx Web服务器\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		默认的SELinux不会保护Nginx Web服务器，但是你可以安装和编译保护软件。<br />\r\n1、安装编译SELinux所需环境支持\r\n	</p>\r\n	<li>\r\n		<p>\r\n			yum -y install selinux-policy-targeted selinux-policy-devel\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		2、下载SELinux策略以强化Nginx Web服务器。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			cd /opt\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			wget \'http://downloads.sourceforge.net/project/selinuxnginx/se-ngix_1_0_10.tar.gz?use_mirror=nchc\'\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		3、解压文件\r\n	</p>\r\n	<li>\r\n		<p>\r\n			tar -zxvf se-ngix_1_0_10.tar.gz\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		4、编译文件\r\n	</p>\r\n	<li>\r\n		<p>\r\n			cd se-ngix_1_0_10/nginx\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			make\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		将会输出如下：<br />\r\nCompiling targeted nginx module<br />\r\n/usr/bin/checkmodule: loading policy configuration from tmp/nginx.tmp<br />\r\n/usr/bin/checkmodule: policy configuration loaded<br />\r\n/usr/bin/checkmodule: writing binary representation (version 6) to tmp/nginx.mod<br />\r\nCreating targeted nginx.pp policy package\r\n	</p>\r\n	<li>\r\n		<p>\r\n			rm tmp/nginx.mod.fc tmp/nginx.mod\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		5、安装生成的nginx.pp SELinux模块：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			/usr/sbin/semodule -i nginx.pp\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		七、基于Iptables防火墙的限制\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		下面的防火墙脚本阻止任何除了允许：\r\n	</p>\r\n	<ul class=\"list-paddingleft-2\">\r\n		<li>\r\n			<p>\r\n				来自HTTP(TCP端口80)的请求\r\n			</p>\r\n		</li>\r\n		<li>\r\n			<p>\r\n				来自ICMP ping的请求\r\n			</p>\r\n		</li>\r\n		<li>\r\n			<p>\r\n				ntp(端口123)的请求输出\r\n			</p>\r\n		</li>\r\n		<li>\r\n			<p>\r\n				smtp(TCP端口25)的请求输出\r\n			</p>\r\n		</li>\r\n	</ul>\r\n	<li>\r\n		<p>\r\n			#!/bin/bash\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			IPT=\"/sbin/iptables\"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			#### IPS ######\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Get server public ip\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			SERVER_IP=$(ifconfig eth0 | grep \'inet addr:\' | awk -F\'inet addr:\' \'{ print $2}\' | awk \'{ print $1}\')\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			LB1_IP=\"204.54.1.1\"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			LB2_IP=\"204.54.1.2\"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Do some smart logic so that we can use damm script on LB2 too\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			OTHER_LB=\"\"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			SERVER_IP=\"\"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			[[ \"$SERVER_IP\" == \"$LB1_IP\" ]] &amp;&amp; OTHER_LB=\"$LB2_IP\" || OTHER_LB=\"$LB1_IP\"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			[[ \"$OTHER_LB\" == \"$LB2_IP\" ]] &amp;&amp; OPP_LB=\"$LB1_IP\" || OPP_LB=\"$LB2_IP\"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			### IPs ###\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			PUB_SSH_ONLY=\"122.xx.yy.zz/29\"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			#### FILES #####\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			BLOCKED_IP_TDB=/root/.fw/blocked.ip.txt\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			SPOOFIP=\"127.0.0.0/8 192.168.0.0/16 172.16.0.0/12 10.0.0.0/8 169.254.0.0/16 0.0.0.0/8 240.0.0.0/4 255.255.255.255/32 168.254.0.0/16 224.0.0.0/4 240.0.0.0/5 248.0.0.0/5 192.0.2.0/24\"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			BADIPS=$( [[ -f ${BLOCKED_IP_TDB} ]] &amp;&amp; egrep -v \"^#|^$\" ${BLOCKED_IP_TDB})\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			### Interfaces ###\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			PUB_IF=\"eth0\"&nbsp; &nbsp;# public interface\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			LO_IF=\"lo\"&nbsp; &nbsp; &nbsp; # loopback\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			VPN_IF=\"eth1\"&nbsp; &nbsp;# vpn / private net\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			### start firewall ###\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			echo \"Setting LB1 $(hostname) Firewall...\"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# DROP and close everything\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -P INPUT DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -P OUTPUT DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -P FORWARD DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Unlimited lo access\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A INPUT -i ${LO_IF} -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A OUTPUT -o ${LO_IF} -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Unlimited vpn / pnet access\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A INPUT -i ${VPN_IF} -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A OUTPUT -o ${VPN_IF} -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Drop sync\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A INPUT -i ${PUB_IF} -p tcp ! --syn -m state --state NEW -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Drop Fragments\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A INPUT -i ${PUB_IF} -f -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -p tcp --tcp-flags ALL FIN,URG,PSH -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -p tcp --tcp-flags ALL ALL -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Drop NULL packets\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -p tcp --tcp-flags ALL NONE -m limit --limit 5/m --limit-burst 7 -j LOG --log-prefix \" NULL Packets \"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -p tcp --tcp-flags ALL NONE -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -p tcp --tcp-flags SYN,RST SYN,RST -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Drop XMAS\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -p tcp --tcp-flags SYN,FIN SYN,FIN -m limit --limit 5/m --limit-burst 7 -j LOG --log-prefix \" XMAS Packets \"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -p tcp --tcp-flags SYN,FIN SYN,FIN -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Drop FIN packet scans\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -p tcp --tcp-flags FIN,ACK FIN -m limit --limit 5/m --limit-burst 7 -j LOG --log-prefix \" Fin Packets Scan \"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -p tcp --tcp-flags FIN,ACK FIN -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -p tcp --tcp-flags ALL SYN,RST,ACK,FIN,URG -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Log and get rid of broadcast / multicast and invalid\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -m pkttype --pkt-type broadcast -j LOG --log-prefix \" Broadcast \"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -m pkttype --pkt-type broadcast -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -m pkttype --pkt-type multicast -j LOG --log-prefix \" Multicast \"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -m pkttype --pkt-type multicast -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -m state --state INVALID -j LOG --log-prefix \" Invalid \"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT&nbsp; -A INPUT -i ${PUB_IF} -m state --state INVALID -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Log and block spoofed ips\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -N spooflist\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			for ipblock in $SPOOFIP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			do\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $IPT -A spooflist -i ${PUB_IF} -s $ipblock -j LOG --log-prefix \" SPOOF List Block \"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $IPT -A spooflist -i ${PUB_IF} -s $ipblock -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			done\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -I INPUT -j spooflist\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -I OUTPUT -j spooflist\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -I FORWARD -j spooflist\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Allow ssh only from selected public ips\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			for ip in ${PUB_SSH_ONLY}\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			do\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;$IPT -A INPUT -i ${PUB_IF} -s ${ip} -p tcp -d ${SERVER_IP} --destination-port 22 -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;$IPT -A OUTPUT -o ${PUB_IF} -d ${ip} -p tcp -s ${SERVER_IP} --sport 22 -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			done\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# allow incoming ICMP ping pong stuff\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A INPUT -i ${PUB_IF} -p icmp --icmp-type 8 -s 0/0 -m state --state NEW,ESTABLISHED,RELATED -m limit --limit 30/sec&nbsp; -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A OUTPUT -o ${PUB_IF} -p icmp --icmp-type 0 -d 0/0 -m state --state ESTABLISHED,RELATED -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# allow incoming HTTP port 80\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A INPUT -i ${PUB_IF} -p tcp -s 0/0 --sport 1024:65535 --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A OUTPUT -o ${PUB_IF} -p tcp --sport 80 -d 0/0 --dport 1024:65535 -m state --state ESTABLISHED -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# allow outgoing ntp\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A OUTPUT -o ${PUB_IF} -p udp --dport 123 -m state --state NEW,ESTABLISHED -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A INPUT -i ${PUB_IF} -p udp --sport 123 -m state --state ESTABLISHED -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# allow outgoing smtp\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A OUTPUT -o ${PUB_IF} -p tcp --dport 25 -m state --state NEW,ESTABLISHED -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A INPUT -i ${PUB_IF} -p tcp --sport 25 -m state --state ESTABLISHED -j ACCEPT\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			### add your other rules here ####\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			#######################\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# drop and log everything else\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A INPUT -m limit --limit 5/m --limit-burst 7 -j LOG --log-prefix \" DEFAULT DROP \"\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			$IPT -A INPUT -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			exit 0\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		八、控制缓冲区溢出攻击\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		编辑nginx.conf，为所有客户端设置缓冲区的大小限制。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			vi /usr/local/nginx/conf/nginx.conf\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		编辑和设置所有客户端缓冲区的大小限制如下：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			## Start: Size Limits &amp; Buffer Overflows ##\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; client_body_buffer_size&nbsp; 1K;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; client_header_buffer_size 1k;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; client_max_body_size 1k;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; large_client_header_buffers 2 1k;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;## END: Size Limits &amp; Buffer Overflows ##\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		解释：<br />\r\n1、client_body_buffer_size 1k-（默认8k或16k）这个指令可以指定连接请求实体的缓冲区大小。如果连接请求超过缓存区指定的值，那么这些请求实体的整体或部分将尝试写入一个临时文件。<br />\r\n2、client_header_buffer_size 1k-指令指定客户端请求头部的缓冲区大小。绝大多数情况下一个请求头不会大于1k，不过如果有来自于wap客户端的较大的cookie它可能会大于1k，Nginx将分配给它一个更大的缓冲区，这个值可以在large_client_header_buffers里面设置。<br />\r\n3、client_max_body_size 1k-指令指定允许客户端连接的最大请求实体大小，它出现在请求头部的Content-Length字段。<br />\r\n如果请求大于指定的值，客户端将收到一个”Request Entity Too Large” (413)错误。记住，浏览器并不知道怎样显示这个错误。<br />\r\n4、large_client_header_buffers-指定客户端一些比较大的请求头使用的缓冲区数量和大小。请求字段不能大于一个缓冲区大小，如果客户端发送一个比较大的头，nginx将返回”Request URI too large” (414)<br />\r\n同样，请求的头部最长字段不能大于一个缓冲区，否则服务器将返回”Bad request” (400)。缓冲区只在需求时分开。默认一个缓冲区大小为操作系统中分页文件大小，通常是4k或8k，如果一个连接请求最终将状态转换为keep-alive，它所占用的缓冲区将被释放。<br />\r\n你还需要控制超时来提高服务器性能并与客户端断开连接。按照如下编辑：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			## Start: Timeouts ##\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; client_body_timeout&nbsp; &nbsp;10;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; client_header_timeout 10;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; keepalive_timeout&nbsp; &nbsp; &nbsp;5 5;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; send_timeout&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			## End: Timeouts ##\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		1、client_body_timeout 10;-指令指定读取请求实体的超时时间。这里的超时是指一个请求实体没有进入读取步骤，如果连接超过这个时间而客户端没有任何响应，Nginx将返回一个”Request time out” (408)错误。<br />\r\n2、client_header_timeout 10;-指令指定读取客户端请求头标题的超时时间。这里的超时是指一个请求头没有进入读取步骤，如果连接超过这个时间而客户端没有任何响应，Nginx将返回一个”Request time out” (408)错误。<br />\r\n3、keepalive_timeout 5 5; – 参数的第一个值指定了客户端与服务器长连接的超时时间，超过这个时间，服务器将关闭连接。参数的第二个值（可选）指定了应答头中Keep-Alive: timeout=time的time值，这个值可以使一些浏览器知道什么时候关闭连接，以便服务器不用重复关闭，如果不指定这个参数，nginx不会在应答头中发送Keep-Alive信息。（但这并不是指怎样将一个连接“Keep-Alive”）参数的这两个值可以不相同。<br />\r\n4、send_timeout 10; 指令指定了发送给客户端应答后的超时时间，Timeout是指没有进入完整established状态，只完成了两次握手，如果超过这个时间客户端没有任何响应，nginx将关闭连接。\r\n	</p>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		九、控制并发连接\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		你可以使用NginxHttpLimitZone模块来限制指定的会话或者一个IP地址的特殊情况下的并发连接。编辑nginx.conf:\r\n	</p>\r\n	<li>\r\n		<p>\r\n			### Directive describes the zone, in which the session states are stored i.e. store in slimits. ###\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			### 1m can handle 32000 sessions with 32 bytes/session, set to 5m x 32000 session ###\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp; limit_zone slimits $binary_remote_addr 5m;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			### Control maximum number of simultaneous connections for one session i.e. ###\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			### restricts the amount of connections from a single ip address ###\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;limit_conn slimits 5;\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		上面表示限制每个远程IP地址的客户端同时打开连接不能超过5个。\r\n	</p>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		十、只允许我们的域名的访问\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		如果机器人只是随机扫描服务器的所有域名，那拒绝这个请求。你必须允许配置的虚拟域或反向代理请求。你不必使用IP地址来拒绝。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			## Only requests to our Host are allowed i.e. nixcraft.in, images.nixcraft.in and www.nixcraft.in\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp;if ($host !~ ^(nixcraft.in|www.nixcraft.in|images.nixcraft.in)$ ) {\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return 444;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp;}\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			##\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		十一、限制可用的请求方法\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		GET和POST是互联网上最常用的方法。 Web服务器的方法被定义在RFC 2616。如果Web服务器不要求启用所有可用的方法，它们应该被禁用。下面的指令将过滤只允许GET，HEAD和POST方法：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			## Only allow these request methods ##\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; if ($request_method !~ ^(GET|HEAD|POST)$ ) {\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return 444;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; }\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			## Do not accept DELETE, SEARCH and other methods ##\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		更多关于HTTP方法的介绍\r\n	</p>\r\n	<ul class=\"list-paddingleft-2\">\r\n		<li>\r\n			<p>\r\n				GET方法是用来请求，如文件https://www.centos.bz/index.php。\r\n			</p>\r\n		</li>\r\n		<li>\r\n			<p>\r\n				HEAD方法是一样的，除非该服务器的GET请求无法返回消息体。\r\n			</p>\r\n		</li>\r\n		<li>\r\n			<p>\r\n				POST方法可能涉及到很多东西，如储存或更新数据，或订购产品，或通过提交表单发送电子邮件。这通常是使用服务器端处理，如PHP，Perl和<a>Python</a>等脚本。如果你要上传的文件和在服务器处理数据，你必须使用这个方法。\r\n			</p>\r\n		</li>\r\n	</ul>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		十二、如何拒绝一些User-Agents？\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		你可以很容易地阻止User-Agents,如扫描器，机器人以及滥用你服务器的垃圾邮件发送者。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			## Block download agents ##\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; if ($http_user_agent ~* LWP::Simple|BBBike|wget) {\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return 403;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; }\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			##\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		阻止Soso和有道的机器人：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			## Block some robots ##\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; if ($http_user_agent ~* Sosospider|YodaoBot) {\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return 403;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; }\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		十三、如何防止图片盗链\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		图片或HTML盗链的意思是有人直接用你网站的图片地址来显示在他的网站上。最终的结果，你需要支付额外的宽带费用。这通常是在论坛和博客。我强烈建议您封锁，并阻止盗链行为。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			# Stop deep linking or hot linking\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			location /images/ {\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; valid_referers none blocked www.example.com example.com;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; if ($invalid_referer) {\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp; return&nbsp; &nbsp;403;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; }\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			}\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		例如：重定向并显示指定图片\r\n	</p>\r\n	<li>\r\n		<p>\r\n			valid_referers blocked www.example.com example.com;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;if ($invalid_referer) {\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; rewrite ^/images/uploads.*\\.(gif|jpg|jpeg|png)$ http://www.examples.com/banned.jpg last\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;}\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		十四、目录限制\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		你可以对指定的目录设置访问权限。所有的网站目录应该一一的配置，只允许必须的目录访问权限。<br />\r\n<strong>通过IP地址限制访问</strong><br />\r\n你可以通过IP地址来限制访问目录/admin/:\r\n	</p>\r\n	<li>\r\n		<p>\r\n			location /docs/ {\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; ## block one workstation\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; deny&nbsp; &nbsp; 192.168.1.1;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; ## allow anyone in 192.168.1.0/24\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; allow&nbsp; &nbsp;192.168.1.0/24;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; ## drop rest of the world\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; deny&nbsp; &nbsp; all;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			}\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		<strong>通过密码保护目录</strong><br />\r\n首先创建密码文件并增加“user”用户：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			mkdir /usr/local/nginx/conf/.htpasswd/\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;htpasswd -c /usr/local/nginx/conf/.htpasswd/passwd user\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		编辑nginx.conf,加入需要保护的目录：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			### Password Protect /personal-images/ and /delta/ directories ###\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			location ~ /(personal-images/.*|delta/.*) {\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; auth_basic&nbsp; \"Restricted\";\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp; auth_basic_user_file&nbsp; &nbsp;/usr/local/nginx/conf/.htpasswd/passwd;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			}\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		一旦密码文件已经生成，你也可以用以下的命令来增加允许访问的用户：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			htpasswd -s /usr/local/nginx/conf/.htpasswd/passwd userName\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		十五、Nginx SSL配置\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		HTTP是一个纯文本协议，它是开放的被动监测。你应该使用SSL来加密你的用户内容。<br />\r\n<strong>创建SSL证书</strong><br />\r\n执行以下命令：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			cd /usr/local/nginx/conf\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			openssl genrsa -des3 -out server.key 1024\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			openssl req -new -key server.key -out server.csr\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			cp server.key server.key.org\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			openssl rsa -in server.key.org -out server.key\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		编辑nginx.conf并按如下来更新：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			server {\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp;server_name example.com;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp;listen 443;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp;ssl on;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp;ssl_certificate /usr/local/nginx/conf/server.crt;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp;ssl_certificate_key /usr/local/nginx/conf/server.key;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp;access_log /usr/local/nginx/logs/ssl.access.log;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;&nbsp; &nbsp;error_log /usr/local/nginx/logs/ssl.error.log;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			}\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		重启nginx:\r\n	</p>\r\n	<li>\r\n		<p>\r\n			/usr/local/nginx/sbin/nginx -s reload\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		十六、Nginx与PHP安全建议\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		PHP是流行的服务器端脚本语言之一。如下编辑/etc/php.ini文件：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			# Disallow dangerous functions\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			disable_functions = phpinfo, system, mail, exec\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			## Try to limit resources&nbsp; ##\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Maximum execution time of each script, in seconds\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			max_execution_time = 30\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Maximum amount of time each script may spend parsing request data\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			max_input_time = 60\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Maximum amount of memory a script may consume (8MB)\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			memory_limit = 8M\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Maximum size of POST data that PHP will accept.\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			post_max_size = 8M\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Whether to allow HTTP file uploads.\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			file_uploads = Off\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Maximum allowed size for uploaded files.\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			upload_max_filesize = 2M\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Do not expose PHP error messages to external users\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			display_errors = Off\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Turn on safe mode\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			safe_mode = On\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Only allow access to executables in isolated directory\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			safe_mode_exec_dir = php-required-executables-path\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Limit external access to PHP environment\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			safe_mode_allowed_env_vars = PHP_\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Restrict PHP information leakage\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			expose_php = Off\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Log all errors\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			log_errors = On\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Do not register globals for input data\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			register_globals = Off\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Minimize allowable PHP post size\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			post_max_size = 1K\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Ensure PHP redirects appropriately\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			cgi.force_redirect = 0\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Disallow uploading unless necessary\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			file_uploads = Off\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Enable SQL safe mode\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			sql.safe_mode = On\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			# Avoid Opening remote files\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			allow_url_fopen = Off\r\n		</p>\r\n	</li>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		十七、如果可能让Nginx运行在一个chroot监狱\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		把nginx放在一个chroot监狱以减小潜在的非法进入其它目录。你可以使用传统的与nginx一起安装的chroot。如果可能，那使用FreeBSD jails，Xen，<a>OpenVZ</a>虚拟化的容器概念。\r\n	</p>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		十八、在防火墙级限制每个IP的连接数\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		网络服务器必须监视连接和每秒连接限制。PF和Iptales都能够在进入你的nginx服务器之前阻止最终用户的访问。<br />\r\nLinux&nbsp;<a>Iptables</a>:限制每次Nginx连接数<br />\r\n下面的例子会阻止来自一个IP的60秒钟内超过15个连接端口80的连接数。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			/sbin/iptables -A INPUT -p tcp --dport 80 -i eth0 -m state --state NEW -m recent --set\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			/sbin/iptables -A INPUT -p tcp --dport 80 -i eth0 -m state --state NEW -m recent --update --seconds 60&nbsp; --hitcount 15 -j DROP\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			service iptables save\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		请根据你的具体情况来设置限制的连接数。\r\n	</p>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		十九：配置操作系统保护Web服务器\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		像以上介绍的启动SELinux.正确设置/nginx文档根目录的权限。Nginx以用户nginx运行。但是根目录（/nginx或者/usr/local/nginx/html）不应该设置属于用户nginx或对用户nginx可写。找出错误权限的文件可以使用如下命令：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			find /nginx -user nginx\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			find /usr/local/nginx/html -user nginx\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		确保你更所有权为root或其它用户，一个典型的权限设置 /usr/local/nginx/html/\r\n	</p>\r\n	<li>\r\n		<p>\r\n			ls -l /usr/local/nginx/html/\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		示例输出：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			-rw-r--r-- 1 root root 925 Jan&nbsp; 3 00:50 error4xx.html\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			-rw-r--r-- 1 root root&nbsp; 52 Jan&nbsp; 3 10:00 error5xx.html\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			-rw-r--r-- 1 root root 134 Jan&nbsp; 3 00:52 index.html\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		你必须删除由vi或其它文本编辑器创建的备份文件：\r\n	</p>\r\n	<li>\r\n		<p>\r\n			find /nginx -name \'.?*\' -not -name .ht* -or -name \'*~\' -or -name \'*.bak*\' -or -name \'*.old*\'\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			&nbsp;find /usr/local/nginx/html/ -name \'.?*\' -not -name .ht* -or -name \'*~\' -or -name \'*.bak*\' -or -name \'*.old*\'\r\n		</p>\r\n	</li>\r\n	<p style=\"color:#444444;\">\r\n		通过find命令的-delete选项来删除这些文件。\r\n	</p>\r\n	<h3 style=\"font-weight:400;font-size:16px;\">\r\n		二十、限制Nginx连接传出\r\n	</h3>\r\n	<p style=\"color:#444444;\">\r\n		黑客会使用工具如wget下载你服务器本地的文件。使用Iptables从nginx用户来阻止传出连接。ipt_owner模块试图匹配本地产生的数据包的创建者。下面的例子中只允许user用户在外面使用80连接。\r\n	</p>\r\n	<li>\r\n		<p>\r\n			/sbin/iptables -A OUTPUT -o eth0 -m owner --uid-owner vivek -p tcp --dport 80 -m state --state NEW,ESTABLISHED&nbsp; -j ACCEPT\r\n		</p>\r\n	</li>\r\n</ul>','2017-07-24 15:19:59',1,1,'images/nginx.png','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5'),('c6a4b053-f496-4090-8b46-732333792f1f','Python Web 框架介绍','Python今天，有非常多的Python框架，用来帮助你更轻松的创建web应用。这些框架把相应的模块组织起来，使得构建应用的时候可以更快捷，也不用去关注一些细节（例如socket和协议），所以需要的都在框架里了。接下来我们会介绍不同的选项','<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">Python发源于八十年代后期。开发者是Centrum Wiskunde &amp; Informatica的Guido van Rossum，这是位于荷兰阿姆斯特丹科学园区的一个数学和计算机科学研究中心。之后Van Rossum一直是Python开发很有影响的人物。事实上，社区成员给了他一个荣誉称号：终生仁慈独裁者(BDFL)。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">经过初期的不起眼，Python已经成为互联网最流行的服务端编程语言之一。根据W3Techs的统计，它被用于很多的大流量的站点，超过了ColdFusion, PHP, 和ASP.NET。其中超过98%的站点运行的是Python 2.0，只有1%多一点的站点运行3.0。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"color:#C00000;font-weight:bold;font-size:14px;\">框架让开发更轻松</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">今天，有着大量的Python框架，它们可以让web应用的开发更轻松。这些框架把不同的模块集成在一起，让你更快的构架程序，而不用关注一些细节（例如socket和协议），框架提供了需要的所有功能。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\"></span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">作为分成两部分的系列文章的第一部分，我们会介绍一些最流行的Python框架。虽然大部分现代的web框架都运行在服务端，也有一些框架开始尝试与客户端代码结合，可以在客户端运行（例如Skulpt和Trinket）。Python框架通常分为全栈框架和非全栈框架。全栈框架设计从用户体验到数据库的所有技术，非全栈框架则并不包含整个开发的全部技术。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">此外还有一种微框架，也属于非全栈框架，但是更轻量级。有的情况下，微框架是比较适合的，有时又适合使用全栈框架。在文章的第二部分我们会对全栈框架和微框架做一个比较。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"color:#C00000;font-weight:bold;font-size:14px;\">Django</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">Django恐怕是最有代表性的Python框架了。它是一个遵循MMVC架构模式的开源框架。它的名字来自Django Reinhardt，一个法国作曲家和吉他演奏家，很多人认为他是历史上最伟大的吉他演奏家。位于堪萨斯洲的Lawrence城的Lawrence Journal-World报社有两位程序员，Adrian Holovaty和Simon Willison，他们在2003的时候开发出了Django，用于给报纸开发web程序。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">Django内置了模板引擎，同时也通过OOTB来支持流行的Jinja2引擎。它还支持基于正则的URL分发，可以通过简单的URL来完成复杂的映射。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">Django的优势之一是只需要单独的安装包来安装。其他的一些类似的框架需要下载很多组件才能开始工作。而且，Django还有完善的保持更新的文档，对于开源项目来说这通常是短板。它是一个健壮的框架，很好的集成了很多来自社区的插件和扩展。项目背后的社区看上去也组织的很好，这从它非常完善的文档和教程就可以看出来。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"color:#C00000;font-weight:bold;font-size:14px;\">TurboGears</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">TurboGears是在几个著名的Python项目上构建起来的一个框架，如SQLAlchemy，WebOb，Repoze，Genshi。在某种意义上，TurboGears是将多个已经建立的开放平台粘合在一起。和Django一样，它采用MVC架构。它最近还包含一个“最小模式”，使其可以作为一个微框架。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">TurboGears是由Kevin Dangoor在2005年开发的。他在当年9月将其作为一个开源项目发布。2013年，项目开发人员迁移到支持Python 3，抛弃了他们曾经写的Pylons代码。TurboGears的优点包括:</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">支持聚合</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">强大的对象关系映射器</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">事务系统支持多数据库间事务</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">多数据库支持</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">以可重用的代码片段为模板</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">具有很多的灵活性，可以对接非标准组件</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">支持分片</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">模板系统使设计师的设计更轻松</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">TurboGears的一些缺点包括管理功能较为基础，较少的第三方应用程序以及只有初级的文档。TurboGears的一个重大挑战是它的压倒性。因为它混搭的其他组件都提供无限的灵活性， 当试图决定何种路径来完成一个任务时它是过于复杂的。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"color:#C00000;font-weight:bold;font-size:14px;\">web2py</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">web2py是一个开源框架，允许开发者快速创建动态交互式的网站。它的设计目标是消除拖慢开发的大量重复编程任务，比如创建基本的表格。它在最初是作为工具开发的。随后被Django和Ruby on Rails模仿，Ruby on Rails是个Ruby的框架。同TurboGears一样，它使用MVC架构。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">最开始的源代码是由Massimo DiPierro在2007年开放的。在那时，它被称为Enterprise Web Framework(EWF)。由于命名冲突，它改过好几次名字，最后在1.16版确定为当前的web2py。使用web2py开发的应用包括Movuca内容管理系统，音乐网站NoobMusic，名为LinkFindr的网络诊断工具，以及Instant Press博客平台。在2011年，web2py被评为最好的开源开发软件，荣获Bossie Award。第二年，又斩获InfoWorld的年度技术奖。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">与Django一样，web2py也具有广泛的文档。新开发者和高级开发者可以免费下载它的完整开发手册。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">web2py的一些优点包括：</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">容易使用——作为一个鲁棒的全栈式框架，它无需其他依赖就可以工作，容易学习和部署，安装也无需任何配置文件，一旦下载完成，安装完毕，就可以用了。开发者会获得一个数据库，一个基于web的IDE，web服务器以及一个有多个核心对象组成的强大API。</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">安全性出色——Web2py的模板语言减少了黑客使用跨站脚本的危险，抽象层在创建表单时有表单域有效性检查，避免SQL注入，也阻止了跨站请求伪造攻击（csrf攻击）。会话被存储在服务器上，阻止坏的执行者把浏览器cookie弄乱，并且每个密码都是哈希后存储的。</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">web2py的一些缺点包括：</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">在常规基础上使用管理的接口不太容易</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">管理的接口没有权限</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">没有内建的单元测试支持</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">开发速度迅速，所有的函数都有缺省行为，表单时自动生成的，高层次的小部件和应用网格都是内建的。</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"color:#C00000;font-weight:bold;font-size:14px;\">Flask</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">Flask是一个基于Jinja2和Werkzeug的python微框架，和其他框架类似，它是BSD授权的，一个有少量限制的免费软件许可。使用Flask的网站包括领英LinkedIN和Pinterest。Flask有以下特点：</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">内建的单元测试支持</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">模板使用Jinjia2</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">大量文档</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">客户端会话使用安全cookies</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">开发服务器和调试器</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">Restful请求</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">与WSGI 1.0兼容</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">基于unicode</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">大量的扩展Flask是一个年轻的框架，2010年诞生，Flask的目标是不给程序员强加限制，允许你使用自己的数据库对象关系映射，模板引擎，会话中间件以及你的项目所需的其他组件，在我看来这就是这个微框架的用意。我想说像Flask这样的框架更适合有经验的开发者，并不是小规模应用程序所必须的，当然，如果你只想做一个简单的REST API，那么Flask当然再好不过了。</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"color:#C00000;font-weight:bold;font-size:14px;\">Bottle</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">瓶（Bottle）和flask一样，Bottle是一个服务器网关接口（WSGI）网络框架。作为一个文件，它不依赖于Python标准库外的任何库。Marcel Hellkamp于2009年写它的时候，它仅由包含模板、路由和一个WSGI抽象层的最小工具开始。对于程序员寻找灵活性和基本功能、构建简单的应用程序和网站、创建一个Web API来说，这小并且强大的框架是极好的。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">它的优点包括:</span>\r\n</p>\r\n<ul class=\"list-paddingleft-2\" style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">&nbsp;内建的快速模板引擎和对Jinja2,Mako和Cheetah的支持</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">&nbsp;可以访问上传,cookies,表单数据,标题,和其他元数据的大量工具</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">&nbsp;支持fapws3,Google App Engine,CherryPyPaste的内建HTTP开发服务器</span>\r\n		</p>\r\n	</li>\r\n	<li>\r\n		<p>\r\n			<span style=\"font-size:14px;\">&nbsp;支持动态URLs</span>\r\n		</p>\r\n	</li>\r\n</ul>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">Bottle的另一个优点是,它的小巧精干便于嵌入在一个较大应用程序中而不必担心系统依赖关系。如果你想用一个简单的,干净的和快速的框架并且它没有过多冗余，来创建小的应用程序，Bottle是适合你的。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"color:#C00000;font-weight:bold;font-size:14px;\">多框架</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">虽然很难相信,但这些只是少数几十个开发人员可以使用Python框架,。Python.org报道,Django,TurboGears和web2py是最受欢迎的完整选项。为了在框架优化方面提供一个全面的观察，这里我们添加了两个高级形态的微型框架。有着热情的追随者其他框架包括 Pyramid, web.py, Bobo, Albatross, 和 CherryPy。</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"color:#C00000;font-weight:bold;font-size:14px;\">找到正确的适合选择</span>\r\n</p>\r\n<p style=\"color:#3E3E3E;font-family:&quot;font-size:16px;background-color:#FFFFFF;\">\r\n	<span style=\"font-size:14px;\">正确框架的选择取决于项目的规模，它的通信需求，它是否是一个独立的应用程序，定制需求的级别,开销,和许多其他因素。同样重要的是,它取决于哪个框架适合你个人的工作方式。回顾这些项目并下载他们最新的版本。在计划一个主要旅行之前，试开一下确保你在一个合适的车辆中。</span>\r\n</p>','2017-07-24 13:33:34',2,2,'images/python.png','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5'),('caf179b7-703a-41b8-b970-22d9a16ce22c','用微信控制Windows音乐播放器','基于Itchat用python开发用微信控制Windows音乐播放器','<p>\r\n	<span style=\"font-size:14px;\">环境:windows python2.7</span> \r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\"><span style=\"color:#E53333;font-size:14px;\">依赖包：pywin32 itcha</span><span style=\"font-size:14px;\">t</span></span> \r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\">依赖包安装 ：pip install itchat &nbsp; 官方文档：</span><span style=\"font-size:14px;\"></span><a href=\"http://itchat.readthedocs.io/zh/latest/\" target=\"_blank\"><span style=\"font-size:14px;\">http://itchat.readthedocs.io/zh/latest/</span></a><span style=\"font-size:14px;\"></span> \r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\"><span style=\"font-size:14px;\">windows&nbsp;pywin32 下载链接：</span><a href=\"https://nchc.dl.sourceforge.net/project/pywin32/pywin32/Build%20221/pywin32-221.win-amd64-py2.7.exe\" target=\"_blank\"><span style=\"font-size:14px;\">https://nchc.dl.sourceforge.net/project/pywin32/pywin32/Build%20221/pywin32-221.win-amd64-py2.7.exe</span></a></span> \r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\">效果图：</span> \r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\"><img src=\"/static/upload/itchat.png\" alt=\"\" /><br />\r\n</span> \r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\"><span style=\"font-size:14px;\">代码： </span></span>\r\n</p>\r\n<pre class=\"prettyprint lang-js\"># _*_ coding:utf-8 _*_\r\nimport itchat\r\nimport os\r\nimport win32api\r\nmusic_path=r\'d:\\Music\' ##音乐存放路径\r\ndef get_musiclist(musicpath):\r\n    \"\"\"\r\n    获取音乐播放列表\r\n    \"\"\"\r\n    music_list=[]\r\n    a=1\r\n    for musicpath in os.listdir(musicpath):\r\n        if os.path.splitext(musicpath)[1] in [\'.mp3\',\'.ape\',\'.flac\']:\r\n            music_list.append(\'%s %s\'%(a,musicpath.decode(\'gbk\')))\r\n            a+=1\r\n    return music_list   \r\n\r\ndef music_play(musicfile):\r\n    \"\"\"\r\n    用系统默认的音乐播放器播放音乐\r\n    \"\"\"\r\n     win32api.ShellExecute(0, \'open\', r\'%s\\%s\'%(music_path,musicfile), \'\',\'\',0)\r\n\r\n@itchat.msg_register(itchat.content.TEXT)\r\n\r\ndef text_reply(msg):\r\n    if msg[\'Text\']==\'help\':\r\n        help_text=u\'1 help 帮助\\r\\n2 数字 播放音乐\\r\\n3 字符 查找播放音乐\'\r\n        itchat.send(help_text, toUserName=\'filehelper\')\r\n    for music in get_musiclist(music_path):\r\n        if msg[\'Text\']==music.split(\' \',1)[0]:###用音乐序列号播放音乐\r\n            music_play(music.split(\' \',1)[1])    \r\n            itchat.send(u\' 正在播放音乐：%s\'%music.split(\' \',1)[1], toUserName=\'filehelper\')\r\n            break\r\n        elif msg[\'Text\'].lower() in music.lower():###用音乐文件名播放音乐\r\n            music_play(music.split(\' \',1)[1])\r\n            itchat.send(u\' 正在播放音乐：%s\'%music.split(\' \',1)[1], toUserName=\'filehelper\')\r\n            break\r\n    else:\r\n        itchat.send(u\'没有找到：%s\'%msg[\'Text\'], toUserName=\'filehelper\')           \r\nitchat.auto_login(hotReload=True)##扫码一次后存储\r\nitchat.run()\r\n</pre>\r\n<br />\r\n<p>\r\n	<br />\r\n</p>\r\n<p>\r\n	<span style=\"font-size:14px;\"><br />\r\n</span> \r\n</p>\r\n<p>\r\n	<br />\r\n</p>','2017-07-24 14:28:02',2,5,'images/python.png','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5'),('d938c5cc-7765-483a-955a-74cf1fd88c96','自动化暂无文章','自动化暂无文章','自动化暂无文章','2017-07-24 15:47:06',5,3,'images/svn.png','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5');
/*!40000 ALTER TABLE `article` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `article_comment`
--

DROP TABLE IF EXISTS `article_comment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `article_comment` (
  `id` varchar(40) NOT NULL,
  `content` text,
  `date` varchar(30) DEFAULT NULL,
  `article_id` varchar(40) DEFAULT NULL,
  `user_id` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `article_id` (`article_id`),
  KEY `user_id` (`user_id`),
  CONSTRAINT `article_comment_ibfk_1` FOREIGN KEY (`article_id`) REFERENCES `article` (`id`),
  CONSTRAINT `article_comment_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `article_comment`
--

LOCK TABLES `article_comment` WRITE;
/*!40000 ALTER TABLE `article_comment` DISABLE KEYS */;
/*!40000 ALTER TABLE `article_comment` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `article_tag`
--

DROP TABLE IF EXISTS `article_tag`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `article_tag` (
  `article_id` varchar(40) NOT NULL,
  `tag_id` int(11) NOT NULL,
  PRIMARY KEY (`article_id`,`tag_id`),
  KEY `tag_id` (`tag_id`),
  CONSTRAINT `article_tag_ibfk_1` FOREIGN KEY (`article_id`) REFERENCES `article` (`id`),
  CONSTRAINT `article_tag_ibfk_2` FOREIGN KEY (`tag_id`) REFERENCES `tag` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `article_tag`
--

LOCK TABLES `article_tag` WRITE;
/*!40000 ALTER TABLE `article_tag` DISABLE KEYS */;
INSERT INTO `article_tag` VALUES ('58304b03-cae2-4210-81d1-3879665299e7',1),('7b6af791-1126-4b28-8bab-0f6ac4ec30f2',1),('c6a4b053-f496-4090-8b46-732333792f1f',1),('caf179b7-703a-41b8-b970-22d9a16ce22c',1),('af00a55c-4aeb-4f38-ae0e-aa9bcc6d350b',2),('5a688faa-d793-441e-8a05-6d18a2d95233',3),('897c1211-2993-4a1b-99d8-38c9e898e617',6);
/*!40000 ALTER TABLE `article_tag` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `category`
--

DROP TABLE IF EXISTS `category`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `category` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(10) DEFAULT NULL,
  `urlname` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `category`
--

LOCK TABLES `category` WRITE;
/*!40000 ALTER TABLE `category` DISABLE KEYS */;
INSERT INTO `category` VALUES (1,'系统','os'),(2,'编程','deve'),(3,'数据库','database'),(4,'监控','monitor'),(5,'自动化','auto');
/*!40000 ALTER TABLE `category` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `lognote`
--

DROP TABLE IF EXISTS `lognote`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `lognote` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(50) DEFAULT NULL,
  `brief` text,
  `content` text,
  `date` varchar(30) DEFAULT NULL,
  `user_id` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `user_id` (`user_id`),
  CONSTRAINT `lognote_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `lognote`
--

LOCK TABLES `lognote` WRITE;
/*!40000 ALTER TABLE `lognote` DISABLE KEYS */;
/*!40000 ALTER TABLE `lognote` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tag`
--

DROP TABLE IF EXISTS `tag`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tag` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(10) DEFAULT NULL,
  `description` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tag`
--

LOCK TABLES `tag` WRITE;
/*!40000 ALTER TABLE `tag` DISABLE KEYS */;
INSERT INTO `tag` VALUES (1,'Python',''),(2,'Nginx',''),(3,'MySQL',''),(4,'Apache',''),(5,'Tomcat',''),(6,'Zabbix','');
/*!40000 ALTER TABLE `tag` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `uploadfile`
--

DROP TABLE IF EXISTS `uploadfile`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `uploadfile` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `filename` varchar(50) DEFAULT NULL,
  `file_type` varchar(50) NOT NULL,
  `filesize` int(11) NOT NULL,
  `_file_hash` varchar(50) DEFAULT NULL,
  `date` varchar(30) DEFAULT NULL,
  `user_id` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `_file_hash` (`_file_hash`),
  KEY `user_id` (`user_id`),
  CONSTRAINT `uploadfile_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `uploadfile`
--

LOCK TABLES `uploadfile` WRITE;
/*!40000 ALTER TABLE `uploadfile` DISABLE KEYS */;
INSERT INTO `uploadfile` VALUES (2,'640.png','image/png',48499,'40e4f6986a579fe8ed1a1327deb6078b4da4d7b9','2017-07-24 13:33:34','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5'),(3,'641.png','image/png',53999,'db4b9c44c9920d26b15c7ec29c5a17daccd37e2e','2017-07-24 13:33:34','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5'),(4,'itchat.png','image/png',95327,'b30ea81a5a026f6f9f8dd360016893d02d2b9836','2017-07-24 14:28:02','9ffc41d2-e63e-401f-9a19-8cb45bccd2a5');
/*!40000 ALTER TABLE `uploadfile` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `user`
--

DROP TABLE IF EXISTS `user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user` (
  `id` varchar(40) NOT NULL,
  `name` varchar(30) DEFAULT NULL,
  `password` varchar(80) DEFAULT NULL,
  `email` varchar(30) NOT NULL,
  `enrolltime` varchar(30) DEFAULT NULL,
  `logintime` varchar(30) DEFAULT NULL,
  `image` varchar(30) DEFAULT NULL,
  `islock` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`),
  UNIQUE KEY `name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `user`
--

LOCK TABLES `user` WRITE;
/*!40000 ALTER TABLE `user` DISABLE KEYS */;
INSERT INTO `user` VALUES ('9ffc41d2-e63e-401f-9a19-8cb45bccd2a5','howhy11','966358de9055696bdda874110bcaab7f','admin@howhy11.com','2017-07-24 13:33:34','2017-07-24 16:16:07','images/head1.jpg',0);
/*!40000 ALTER TABLE `user` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `weblink`
--

DROP TABLE IF EXISTS `weblink`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `weblink` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(50) DEFAULT NULL,
  `weburl` varchar(100) DEFAULT NULL,
  `description` varchar(200) DEFAULT NULL,
  `date` varchar(30) DEFAULT NULL,
  `user_id` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `weburl` (`weburl`),
  KEY `user_id` (`user_id`),
  CONSTRAINT `weblink_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `weblink`
--

LOCK TABLES `weblink` WRITE;
/*!40000 ALTER TABLE `weblink` DISABLE KEYS */;
/*!40000 ALTER TABLE `weblink` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2017-07-24 16:18:56
